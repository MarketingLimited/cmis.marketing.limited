# ๐๏ธ CMIS DevOps Maintenance Checklist โ v15.1

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-11-10  
**ุงููุณุคูู:** ูุฑูู ุงูุชุดุบูู ุงูุฅุฏุฑุงูู (Cognitive DevOps)

---

## ๐ฏ ุงููุฏู

ุชุญุฏูุฏ ุงูููุงู ุงูุฏูุฑูุฉ ููุฑูู DevOps ููุญูุงุธ ุนูู ุฃุฏุงุก ูุงุณุชูุฑุงุฑ ูุธุงู CMIS ุจุนุฏ ุชุญุณูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุทุจูุฉ ุงูุฐูุงุก ุงูุฏูุงูู.

---

## ๐ ุงูุตูุงูุฉ ุงูููููุฉ (Daily)

| ุงููููุฉ | ุงูุฃุฏุงุฉ / ุงููุณุงุฑ | ุงููุฏู |
|----------|----------------|--------|
| ุงูุชุญูู ูู ุญุงูุฉ ุงูู Queue | `php artisan cmis:embedding-status` | ุงูุชุฃูุฏ ูู ุฃู ุฌููุน ุงูููุงู ูู ุญุงูุฉ `completed` |
| ูุฑุงูุจุฉ ุณุฌูุงุช ุงููุธุงู | `/storage/logs/laravel.log` | ุงูุจุญุซ ุนู ุฃุฎุทุงุก ุงูุชุถููู ุฃู ุงูุจุญุซ ุงูุฏูุงูู |
| ูุญุต ุฃุฏุงุก ุงูุจุญุซ | `EXPLAIN ANALYZE SELECT * FROM cmis_knowledge.semantic_search_advanced('test');` | ูุฑุงูุจุฉ ุฒูู ุงูุชูููุฐ |
| ุชุญุฏูุซ ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ | `SELECT cmis_knowledge.auto_feedback_from_logs();` | ุชุญุฏูุซ ุณุฌู ุงููุนุฑูุฉ ุงูููููุฉ |

---

## ๐ ุงูุตูุงูุฉ ุงูุฃุณุจูุนูุฉ (Weekly)

| ุงููููุฉ | ุงูุฃุฏุงุฉ / ุงููุณุงุฑ | ุงููุฏู |
|----------|----------------|--------|
| ุชุญููู ุฃุฏุงุก PostgreSQL | `pg_stat_statements` | ุชุญุฏูุฏ ุงูุงุณุชุนูุงูุงุช ุงูุจุทูุฆุฉ |
| ุชูุธูู ุจูุงูุงุช ุงูุจุญุซ ุงููุฏููุฉ | `DELETE FROM cmis_knowledge.semantic_search_logs WHERE created_at < now() - interval '30 days';` | ุชูููู ุญุฌู ุงูุณุฌูุงุช |
| ุฅุนุงุฏุฉ ุจูุงุก ููุงุฑุณ pgvector | `REINDEX INDEX idx_semantic_logs_intent;` | ุงูุญูุงุธ ุนูู ุณุฑุนุฉ ุงูุจุญุซ |
| ุชุญุฏูุซ ุงูู Materialized Views | `SELECT cmis_knowledge.refresh_mv_search_analytics();` | ุชุญุฏูุซ ุชูุงุฑูุฑ ุงูุฃุฏุงุก |

---

## ๐งฐ ุงูุตูุงูุฉ ุงูุดูุฑูุฉ (Monthly)

| ุงููููุฉ | ุงูุฃุฏุงุฉ / ุงููุณุงุฑ | ุงููุฏู |
|----------|----------------|--------|
| ุชูุฑูุบ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ | `/mnt/backups/` | ุงูุชุญูู ูู ุตูุงุญูุฉ ุงููุณุฎ |
| Vacuum + Analyze ุดุงูู | `VACUUM (FULL, ANALYZE);` | ุชุญุณูู ุฃุฏุงุก ุงูุชุฎุฒูู ูุงูุฅุญุตุงุกุงุช |
| ุงุฎุชุจุงุฑ ุตูุงุญูุฉ ุงูู Triggers | `SELECT * FROM information_schema.triggers WHERE trigger_schema IN ('cmis', 'cmis_knowledge');` | ุงูุชุฃูุฏ ูู ุชูุนูู ุงููุดุบูุงุช |
| ุชุญุฏูุซ ุงูููุงู ุงููุฌุฏููุฉ (cron) | `SELECT * FROM cron.job;` | ูุฑุงุฌุนุฉ ุงูููุงู ุงูุชููุงุฆูุฉ |

---

## โ๏ธ ุงูุฃูุงูุฑ ุงูุชููุงุฆูุฉ ุนุจุฑ CRON

```bash
# ุงูุชุญูู ูู ุงูุชุถูููุงุช ูู 3 ุณุงุนุงุช
0 */3 * * * php /home/cmis/public_html/artisan cmis:process-embeddings --batch-size=50 >> /var/log/cmis_embeddings.log 2>&1

# ุชุญุฏูุซ ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ ูููููุง
0 3 * * * psql -d cmis -c "SELECT cmis_knowledge.auto_feedback_from_logs();"

# ุชูุธูู ุงูุณุฌูุงุช ุฃุณุจูุนููุง
0 2 * * 0 php /home/cmis/public_html/artisan cmis:clean-search-logs >> /var/log/cmis_cleanup.log 2>&1
```

---

## ๐ ุงูุตูุงูุฉ ุงูุฃูููุฉ

| ุงููููุฉ | ุงูุชูุฑุงุฑ | ุงูุฅุฌุฑุงุก |
|----------|-----------|-----------|
| ุชุญุฏูุซ ูููุงุช ูุฑูุฑ ููุงุนุฏ ุงูุจูุงูุงุช | ุฑุจุน ุณููู | ุชุนุฏูู `DB_PASSWORD` ูู `.env` ูุชุญุฏูุซ ุณุฑู ุงูุฅูุชุงุฌ |
| ูุฑุงุฌุนุฉ ุตูุงุญูุงุช ุงููุณุชุฎุฏููู | ูุตู ุณููู | ูุญุต ุงูุฃุฏูุงุฑ ูู `pg_roles` |
| ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู OpenAI API | ุดูุฑู | ุชุญููู ุงูููุงุชูุฑ ูุญุฏูุฏ ุงูุงุณุชุฎุฏุงู |
| ุงูุชุญูู ูู ุงูุงุชุตุงูุงุช ุงููุดูุฑุฉ | ูุณุชูุฑ | ุชูุนูู `SSL=verify-full` ูู ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู |

---

## ๐งฉ ุฃุฏูุงุช ุงููุฑุงูุจุฉ ุงูููุชุฑุญุฉ

| ุงูุฃุฏุงุฉ | ุงููุธููุฉ |
|--------|----------|
| **pgAdmin / DBeaver** | ูุฑุงูุจุฉ ููุงุนุฏ ุงูุจูุงูุงุช ูุฏูููุง |
| **Grafana + Prometheus** | ุชุญููู ุงูุฃุฏุงุก ุงูุจูุงูู |
| **Logtail / Graylog** | ูุฑุงูุจุฉ ุฃุฎุทุงุก Laravel ูSQL |
| **UptimeRobot / BetterStack** | ูุฑุงูุจุฉ ุชูุงูุฑ ุงูุฎุฏูุฉ |

---

## ๐ง ููุงุญุธุงุช ุฎุชุงููุฉ

- ุฌููุน ููุงู ุงูุตูุงูุฉ ูุฌุจ ุฃู ุชูุณุฌู ูู `cmis_dev.dev_logs` ูุน ููุน ุงูุญุฏุซ `maintenance_check`.  
- ููููุน ุชุนุฏูู ูููู ุงูุฌุฏุงูู ูุจุงุดุฑุฉ ูู ุงูุฅูุชุงุฌ ุฏูู ููุงููุฉ ูุฏูุฑ ุงููุธุงู.  
- ุฃู ูุดู ูู ุงูููุงู ุงูุชููุงุฆูุฉ ูุฌุจ ุฃู ููุฑูุน ุนุจุฑ Slack Channel: `#cmis-devops-alerts`.

---

**ุชู ุงูุชูุซูู ุจูุงุณุทุฉ:** CMIS Orchestrator v15.1  
**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-11-10