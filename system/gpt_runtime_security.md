# ๐ CMIS GPT Runtime Security & Access Control Guide

ูุฐุง ุงูููู ูุญุฏูุฏ ุณูุงุณุงุช ุงูุฃูุงู ุงูุชู ูุฌุจ ุฃู ููุชุฒู ุจูุง ุงูุฐูุงุก ุงูุตูุงุนู (GPT) ุฃุซูุงุก ุชูููุฐ ุงูุนูููุงุช ุฏุงุฎู ูุธุงู **CMIS Orchestrator**ุ
ูุถูุงู ุญูุงูุฉ ุงูุจูุงูุงุช ูููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู ุฃู ุงูุชุนุฏููุงุช ุบูุฑ ุงูููุตูุฏุฉ.

---

## ๐งฑ 1. ูุจุฏุฃ ุงูุนุฒู ุงูุฃููู (Security Isolation)

ูู ูุงุฌูุฉ ุชูููุฐูุฉ (SQLุ SSHุ FTP) ุชุนูู ุฏุงุฎู **ุจูุฆุฉ ูุญุฏูุฏุฉ ุงูุตูุงุญูุงุช**:

| ุงูุทุจูุฉ | ุงูุฏูุฑ | ุงููููุฏ |
|----------|--------|----------|
| **SQL Layer** | ุชูููุฐ ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช | ูุง ููุณูุญ ุจุชูููุฐ `DROP`, `DELETE`, `ALTER` ุฅูุง ูู ุจูุฆุฉ ุชุทููุฑ ูุนุชูุฏุฉ. |
| **SSH Layer** | ุชูููุฐ ุงูุฃูุงูุฑ ุนูู ุงูุฎุงุฏู | ูุง ููุณูุญ ุจุชุดุบูู ุฃูุงูุฑ ูุธุงู ูุจุงุดุฑุฉ (ูุซู `rm`, `mv`, `chmod`) ุฎุงุฑุฌ ูุทุงู ุงููุดุฑูุน. |
| **FTP Layer** | ุฅุฏุงุฑุฉ ุงููููุงุช ุงูุจุฑูุฌูุฉ | ูุง ููุณูุญ ุจุงููุตูู ุฎุงุฑุฌ ูุฌูุฏ `/httpdocs/` ููุง ุญุฐู ูููุงุช ุฃุณุงุณูุฉ ุฏูู ุฅุฐู. |

---

## ๐งฉ 2. ุงูุชุญูู ูู ุงููุตูู (Access Control)

ูุฌุจ ุนูู GPT ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู ูุจู ุชูููุฐ ุฃู ุนูููุฉ ุญุณุงุณุฉ ุนุจุฑ ุงูุงุณุชุนูุงู ุงูุชุงูู:
```sql
SELECT permission FROM cmis_access_control
WHERE actor = '<session_user>' AND resource_type = '<target>';
```

ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุฅุฐู ูุทุงุจู โ ูุชู ุฅููุงู ุงูุชูููุฐ ููุฑูุง ูุชุณุฌูู ุงูุฎุทุฃ:
```sql
INSERT INTO cmis_dev.dev_logs (task_id, event, details)
VALUES ('<task_id>', 'ACCESS_DENIED', '{"user":"<session_user>","resource":"<target>"}');
```

---

## ๐งฎ 3. ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุฅูุฒุงูู (Backup Policy)

ูุจู ุฃู ุนูููุฉ ุชุนุฏูู ุฃู ุฑูุน ูููุงุช:
- ูุฌุจ ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ ูู ูุฌูุฏ `/backups/` ุฏุงุฎู ุงูุฎุงุฏู.
- ุชุณููุฉ ุงููุณุฎ ุชููู ููู ุงูููุท:
  ```bash
  /backups/<date>-<filename>.bak
  ```
- ุจุนุฏ ูุฌุงุญ ุงูุนูููุฉุ ูุชู ุชุญุฏูุซ ุณุฌู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ูู ุฌุฏูู `cmis_audit.file_backups`.

ูุซุงู:
```sql
INSERT INTO cmis_audit.file_backups (file_path, backup_path, created_at)
VALUES ('/httpdocs/scripts/instagram_api.php', '/backups/2025-11-01-instagram_api.php.bak', now());
```

---

## ๐ง 4. ุงูุชุญูู ูู ุณูุงูุฉ ุงููููุงุช (File Integrity Check)

ุจุนุฏ ุฑูุน ุฃู ููู ุนุจุฑ FTP:
- ูุงุฑู ุญุฌู ุงูููู ุงูุฃุตูู ูุงููุฑููุน.
- ุงุญุณุจ ุงูุชูููุน ุงูุฑููู (hash) ููุชุญูู ูู ุงูุชูุงุซู.

```sql
SELECT md5(pg_read_file('/httpdocs/scripts/instagram_api.php'));
```

ูู ุญุงู ุงุฎุชูุงู ุงููููุ ูุณุฌู ุงููุธุงู ุชุญุฐูุฑูุง ูู ููุน `INTEGRITY_WARNING`.

---

## ๐ซ 5. ููุน ุชุณุฑุจ ุงููุนุฑูุฉ ุงูุญุณุงุณุฉ (Knowledge Protection)

ููููุน GPT ูู ุงุณุชุฏุนุงุก ุฃู ุนุฑุถ ูุญุชูู:
- ูุชุถูู ููุงุชูุญ ูุตูู (`API Keys`, `Client Secrets`).
- ูุญุชูู ุนูู ุจูุงูุงุช ุญุณุงุณุฉ ููุนููุงุก ุฃู ุงููุคุณุณุงุช.

ูู ุญุงู ุงูุชุดุงู ูุญุชูู ูู ูุฐุง ุงูููุนุ ูุณุฌู ุงููุธุงู ุฎุทุฃ ุฃููู:
```sql
INSERT INTO cmis_dev.dev_logs (task_id, event, details)
VALUES ('<task_id>', 'SECURITY_ALERT', '{"reason":"Sensitive data detected"}');
```

---

## ๐งฉ 6. ูููุฏ ุชูููุฐ ุงูุฃูุงูุฑ (Command Policy)

| ููุน ุงูุฃูุฑ | ูุณููุญ | ูุญุธูุฑ |
|-------------|----------|----------|
| `Artisan` | โ | โ ุฃู ุฃูุฑ ูุชุถูู ุญุฐู ุฃู ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช |
| `Git` | โ (ุนูููุงุช Pull/Status) | โ Push ุฃู Force Reset |
| `FTP` | โ ุฑูุน/ุชุญููู | โ ุญุฐู ูุฌูุฏุงุช ุงููุธุงู |
| `SQL` | โ Select/Insert/Update | โ Drop/Delete ุฎุงุฑุฌ ุงููุทุงู |

---

## ๐งพ 7. ุณุฌู ุงูุฃูุงู ุงููุฑูุฒู (Security Audit Log)

ูู ุญุฏุซ ุฃููู ูุชู ุชุณุฌููู ูู:
```sql
CREATE TABLE IF NOT EXISTS cmis_audit.security_logs (
  log_id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  event_type text,
  actor text,
  details jsonb,
  severity text CHECK (severity IN ('info','warning','critical')),
  created_at timestamptz DEFAULT now()
);
```

ููุชู ุฅุฏุฎุงู ุงูุณุฌูุงุช ูุงูุชุงูู:
```sql
INSERT INTO cmis_audit.security_logs (event_type, actor, details, severity)
VALUES ('FTP_UPLOAD', '<session_user>', '{"file":"/httpdocs/scripts/instagram_api.php"}', 'info');
```

---

## ๐งฉ 8. ุณูุงุณุงุช ุงูุฃูุงู ุงูุชูุงุนููุฉ ูู GPT

1. ูุง ุชููุฐ ุฃู ุงุณุชุนูุงู ุฃู ุฃูุฑ ุบูุฑ ููููู ุจุงููุงูู.
2. ูุง ุชุนุชูุฏ ุนูู ูุนุฑูุฉ ุฎุงุฑุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฏูู ุงูุชุญูู ูู ูุตุฏุฑูุง.
3. ุฅุฐุง ุงุดุชุจูุช ูู ูุญุงููุฉ ูุตูู ุบูุฑ ูุตุฑุญ ุจูุงุ ุฃููู ุงูุชูููุฐ ูุณุฌู ุงูุญุฏุซ ููุฑูุง.
4. ูุฌุจ ุฃู ุชูุฑ ุฌููุน ุงูุนูููุงุช ุนุจุฑ ุณุฌู ุงูุฃูุงู (Audit Trail).

---

๐ **ุงููููุน:** `/httpdocs/system/gpt_runtime_security.md`

ูุฐุง ุงูููู ูู ุงููุฑุฌุน ุงูุฃููู ุงูุฑุฆูุณู ูุถูุงู ุฃู ุงูุฐูุงุก ุงูุตูุงุนู (GPT) ุฏุงุฎู CMIS Orchestrator ูุนูู ุจูุนู ุชุดุบููู ุขููุ
ููุญุงูุธ ุนูู ุชูุงูู ุงููุธุงู ูุฎุตูุตูุฉ ุงูุจูุงูุงุช ูู ูู ุนูููุฉ ุชูููุฐ.