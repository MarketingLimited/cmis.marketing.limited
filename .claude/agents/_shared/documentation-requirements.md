# Shared Documentation Requirements
**Version:** 1.0
**Last Updated:** 2025-12-04

This is a shared module for ALL agents. Every agent MUST follow these documentation requirements after making code changes.

## üìã Table of Contents

1. [Mandatory Documentation Rule](#-mandatory-documentation-rule)
2. [Documentation Locations](#-documentation-locations)
3. [Documentation Template](#-documentation-template)
4. [Quick Workflow](#-quick-workflow)
5. [When Documentation is Required](#-when-documentation-is-required)
6. [Related Resources](#-related-resources)

---

## üö® MANDATORY DOCUMENTATION RULE

**ALL Claude Code agents MUST create documentation after ANY codebase editing.**

### The Rule

```
AFTER making ANY code changes:
1. Create or update documentation in docs/ folder
2. DO NOT wait for user to ask
3. Document IMMEDIATELY after implementation
4. Include in the same commit as code changes
```

### Why This Matters

- **Knowledge Preservation** - Future developers (and agents) need context
- **Change Tracking** - What changed, why, and how to use it
- **Onboarding** - New team members can understand features quickly
- **Debugging** - Easier to trace issues when changes are documented
- **Compliance** - Project requires documentation for all significant changes

---

## üìÅ Documentation Locations

**Choose the correct location based on change type:**

| Change Type | Documentation Location | Example |
|-------------|------------------------|---------|
| New feature | `docs/features/<feature-name>.md` | `docs/features/campaign-analytics.md` |
| Bug fix | `docs/fixes/<date>-<description>.md` | `docs/fixes/2025-12-04-oauth-token-refresh.md` |
| Refactoring | `docs/refactoring/<date>-<description>.md` | `docs/refactoring/2025-12-04-controller-split.md` |
| API changes | `docs/api/<endpoint-or-service>.md` | `docs/api/campaign-metrics-endpoint.md` |
| Database changes | `docs/database/<migration-description>.md` | `docs/database/unified-metrics-table.md` |
| Phase completion | `docs/phases/completed/phase-<N>/<summary>.md` | `docs/phases/completed/phase-5/summary.md` |
| Analysis/Reports | `docs/active/analysis/<report-name>.md` | `docs/active/analysis/performance-audit.md` |
| Platform integration | `docs/platforms/<platform-name>.md` | `docs/platforms/meta-ads-integration.md` |
| Testing guides | `docs/testing/<test-type>.md` | `docs/testing/browser-testing.md` |

### Creating New Directories

If the directory doesn't exist, create it:

```bash
# Create feature documentation directory
mkdir -p docs/features

# Create fix documentation directory
mkdir -p docs/fixes

# Etc.
```

---

## üìù Documentation Template

**Use this template for all documentation:**

```markdown
# [Feature/Fix/Change Name]

**Date:** YYYY-MM-DD
**Author:** Claude Code Agent
**Type:** [Feature | Bug Fix | Refactoring | API Change | Database Change]
**Related Files:**
- `path/to/file1.php`
- `path/to/file2.php`

## Summary

Brief description of what was changed and why. 1-3 sentences explaining the purpose.

## Changes Made

- Change 1: Description of first change
- Change 2: Description of second change
- Change 3: Description of third change

## Technical Details

### Architecture (if applicable)
Explain any architectural decisions or patterns used.

### Database Changes (if applicable)
```sql
-- Example migration or schema change
```

### Code Examples (if applicable)
```php
// Example usage of new feature
$result = $service->newMethod($param);
```

## Usage

### How to Use
Step-by-step instructions for using the new feature or understanding the fix.

### Configuration (if applicable)
Any configuration needed in `.env` or config files.

## Testing

### How to Verify
1. Step to verify the change works
2. Another verification step
3. Expected result

### Test Files
- `tests/Feature/YourFeatureTest.php` - Description
- `tests/Unit/YourUnitTest.php` - Description

## Impact

### Breaking Changes
- List any breaking changes (or "None" if backward compatible)

### Migration Required
- List any migration steps needed (or "None")

## Related Documentation

- [Link to related doc 1](../path/to/doc.md)
- [Link to related doc 2](../path/to/doc.md)

---

**Generated by:** Claude Code Agent
**Verified:** [Yes/No] - Browser console clean, Laravel logs clean
**Committed:** [Git commit hash if available]
```

---

## ‚ö° Quick Workflow

### After Code Changes

```bash
# 1. Verify your changes work
grep -i "error\|exception" storage/logs/laravel.log | tail -20

# 2. Run tests
vendor/bin/phpunit tests/Feature/YourFeatureTest.php

# 3. Create documentation
# Choose appropriate location from table above
mkdir -p docs/features  # if needed

# 4. Write documentation using template

# 5. Commit everything together
git add .
git commit -m "$(cat <<'EOF'
feat: Your feature description

- Change 1
- Change 2
- Documentation: docs/features/your-feature.md
- Verified: Browser console clean, Laravel logs clean
- Tests: X passing

ü§ñ Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
EOF
)"
```

### Minimal Documentation (for small fixes)

For very small fixes, you can use a simplified format:

```markdown
# [Fix Name]

**Date:** YYYY-MM-DD
**Author:** Claude Code Agent
**Related Files:** `path/to/file.php`

## Summary
One-sentence description of what was fixed.

## Changes Made
- Single change description

## Testing
How to verify the fix works.
```

---

## üîç When Documentation is Required

### ALWAYS Document

- ‚úÖ New features (any size)
- ‚úÖ Bug fixes (especially complex ones)
- ‚úÖ API changes (endpoints, parameters, responses)
- ‚úÖ Database schema changes (migrations)
- ‚úÖ Refactoring (architectural changes)
- ‚úÖ Configuration changes
- ‚úÖ New services or classes
- ‚úÖ Platform integrations
- ‚úÖ Security-related changes

### Optional Documentation

- ‚ö™ Typo fixes in code comments
- ‚ö™ Whitespace/formatting only changes
- ‚ö™ Dependency version bumps (unless breaking)

### NEVER Skip Documentation For

- ‚ùå Any feature that affects user-facing functionality
- ‚ùå Any change to API contracts
- ‚ùå Any database schema change
- ‚ùå Any security-related change
- ‚ùå Any multi-tenant (RLS) related change

---

## üìä Documentation Quality Checklist

Before committing documentation, verify:

- [ ] **Clear title** - Describes the change accurately
- [ ] **Date included** - Easy to track when change was made
- [ ] **Files listed** - Related files are documented
- [ ] **Summary is clear** - Anyone can understand what changed
- [ ] **Usage instructions** - How to use the feature/fix
- [ ] **Testing info** - How to verify it works
- [ ] **No secrets** - No passwords, API keys, or sensitive data

---

## üìö Related Resources

**Main Documentation:**
- **Documentation Hub:** `docs/README.md`
- **Project Guidelines:** `CLAUDE.md` (root directory)

**Knowledge Base:**
- **Multi-Tenancy:** `.claude/knowledge/MULTI_TENANCY_PATTERNS.md`
- **Browser Testing:** `.claude/knowledge/BROWSER_TESTING_GUIDE.md`
- **i18n Requirements:** `.claude/knowledge/I18N_RTL_REQUIREMENTS.md`

**Other Shared Modules:**
- **Infrastructure:** `.claude/agents/_shared/infrastructure-preflight.md`
- **Browser Testing:** `.claude/agents/_shared/browser-testing-integration.md`
- **i18n/RTL:** `.claude/agents/_shared/i18n-rtl-requirements.md`

---

## üéØ Quick Reference

| Question | Answer |
|----------|--------|
| When to document? | After ANY code change |
| Where to document? | `docs/` folder (see location table) |
| What template? | Use standard template above |
| How detailed? | Enough for future developer to understand |
| Who creates docs? | The agent making the change |
| When to commit? | With the code changes (same commit) |

---

**Remember:**
- ‚úÖ **Document immediately** - Don't wait for user to ask
- ‚úÖ **Use correct location** - Follow the location table
- ‚úÖ **Include in commit** - Documentation goes with code
- ‚úÖ **Be clear and complete** - Future you will thank you

**Last Updated:** 2025-12-04
**Version:** 1.0
**Maintained By:** CMIS AI Agent Development Team
