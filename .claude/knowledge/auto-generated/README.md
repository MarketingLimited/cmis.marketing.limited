# Auto-Generated Knowledge Files

This directory contains **auto-generated** knowledge files that are dynamically created from the live CMIS codebase state.

## üö® IMPORTANT: Do NOT Manually Edit These Files

All files in this directory are automatically generated by the `cmis-knowledge-maintainer` agent and will be **overwritten** on the next update.

If you need to make changes:
1. Edit the discovery jobs in `app/Jobs/Knowledge/`
2. Run: `php artisan knowledge:refresh-all`

## üìã Knowledge Files

### CODEBASE_MAP.md
Complete map of all files and their relationships:
- Models and their traits (BaseModel, HasOrganization)
- Controllers and their dependencies
- Services and repository usage
- Middleware and routing patterns

**Generated by:** `php artisan knowledge:generate-codebase-map`

### DATABASE_SCHEMA_MAP.md
Comprehensive database schema documentation:
- All schemas and tables
- Column definitions and types
- Foreign key relationships
- RLS policies and status
- Indexes and performance metrics

**Generated by:** `php artisan knowledge:generate-schema-map`

### MODEL_RELATIONSHIP_GRAPH.md
Visual relationship map of all models:
- Model hierarchies by domain
- Relationships (belongsTo, hasMany, etc.)
- Polymorphic relationships
- Multi-tenancy patterns

**Generated by:** `php artisan knowledge:generate-model-graph`

### SERVICE_LAYER_MAP.md
Service layer connection flows:
- Controller ‚Üí Service ‚Üí Repository ‚Üí Model flows
- Dependency injection patterns
- Platform integration flows
- Business logic layers

**Generated by:** `php artisan knowledge:generate-service-map`

## üîÑ Auto-Update System

Knowledge files are automatically updated:

### 1. Git Hooks (Real-Time)
Post-commit hook detects changes and updates relevant knowledge:
- `app/Models/*` ‚Üí Update MODEL_RELATIONSHIP_GRAPH.md
- `app/Services/*` ‚Üí Update SERVICE_LAYER_MAP.md
- `app/Http/Controllers/*` ‚Üí Update CODEBASE_MAP.md
- `database/migrations/*` ‚Üí Update DATABASE_SCHEMA_MAP.md

**Install hooks:** `bash .claude/hooks/install-hooks.sh`

### 2. Scheduled Jobs (Daily)
Daily at 2 AM, all knowledge is refreshed:
```php
$schedule->command('knowledge:refresh-all')->dailyAt('02:00');
```

### 3. Manual Refresh (On Demand)
```bash
# Refresh all knowledge
php artisan knowledge:refresh-all

# Refresh specific map
php artisan knowledge:generate-codebase-map
php artisan knowledge:generate-schema-map
php artisan knowledge:generate-model-graph
php artisan knowledge:generate-service-map

# Check knowledge health
php artisan knowledge:health-check
```

## üéØ How Agents Use This Knowledge

All Claude Code agents have access to these auto-generated files as their **Tier 3 knowledge source**:

**Knowledge Hierarchy:**
1. **Tier 1:** Meta-Cognitive Framework (how to learn)
2. **Tier 2:** Reference Knowledge (patterns and principles)
3. **Tier 3:** Auto-Generated Knowledge (current codebase state) ‚Üê THIS DIRECTORY

Agents consult these files to understand:
- Current file structure and relationships
- Database schema and interactions
- Model relationships and flows
- Service layer connections

## üìä Knowledge Freshness

Files include timestamps showing when they were last generated:

```markdown
**Last Updated:** 2025-11-24T10:30:00Z
```

Files older than 24 hours should be refreshed:
```bash
php artisan knowledge:health-check
```

## üîç Discovery-First Philosophy

These files follow the **Discovery-First** principle:

‚ùå **WRONG (Static Facts):**
```markdown
The database has 148 tables.
```

‚úÖ **RIGHT (Discovery Commands):**
```markdown
To discover current table count:
```sql
SELECT COUNT(*) FROM information_schema.tables WHERE table_schema LIKE 'cmis%';
```
```

This ensures knowledge never becomes stale.

## üìö Related Documentation

- **Agent:** `.claude/agents/cmis-knowledge-maintainer.md`
- **Meta-Cognitive Framework:** `.claude/knowledge/META_COGNITIVE_FRAMEWORK.md`
- **Discovery Protocols:** `.claude/knowledge/DISCOVERY_PROTOCOLS.md`
- **Project Knowledge:** `.claude/knowledge/CMIS_PROJECT_KNOWLEDGE.md`

---

**Remember:** These files are auto-generated. To change them, modify the discovery jobs, not the files themselves!
